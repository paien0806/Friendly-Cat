<div class="chatbot-container" [class.open]="isOpen" *ngIf="true">
    <div class="chatbot-header" (click)="toggleChat()">
        é»‘è²“å¹«ä½ æ‰¾ğŸ’¬
        <button class="toggle-btn" (click)="toggleChat($event)">
            {{ isOpen ? 'â–' : 'â•' }}
        </button>
    </div>

    <div #chatBody *ngIf="isOpen" class="chatbot-body">
        <div *ngFor="let msg of messages" [ngClass]="msg.sender">
            <span *ngIf="msg.sender === 'user'" class="text-gray-700">{{ msg.text }}</span>
            <div *ngIf="msg.sender === 'bot' && !msg.isLoading" class="text-primary-default">
                <span *ngIf="!isStoreMessage(msg.text)">ğŸˆâ€â¬›ï¼š{{ msg.text }}</span>
                <div *ngIf="isStoreMessage(msg.text)"><span [innerHTML]="formatStoreMessage(msg.text)"></span></div>
            </div>
            <span *ngIf="msg.sender === 'bot' && msg.isLoading" class="text-primary-default loading-text">
                ğŸˆâ€â¬›ï¼š {{ msg.text }}
            </span>
        </div>
    </div>    

    <div *ngIf="isOpen" class="chatbot-footer">
        <input type="text" 
            [(ngModel)]="userInput" 
            [disabled]="messages[messages.length - 1].isLoading || false" 
            (keyup.enter)="handleEnter($event)" [placeholder]="messages[messages.length - 1].isLoading || false ? 'æœå°‹ä¸­ï¼Œè«‹ç¨å¾Œ...' : 'è«‹è¼¸å…¥è¨Šæ¯'"
        >
        <button (click)="sendMessage()">â¤</button>
    </div>
</div>